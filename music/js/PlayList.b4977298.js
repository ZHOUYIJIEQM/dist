(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlayList"],{"053b":function(t,e,s){var i=s("1e2c"),a=s("d910").f,n=Function.prototype,o=n.toString,l=/^\s*function ([^ (]*)/,r="name";i&&!(r in n)&&a(n,r,{configurable:!0,get:function(){try{return o.call(this).match(l)[1]}catch(t){return""}}})},"1c2e":function(t,e,s){"use strict";var i=s("1944"),a=s("857c"),n=s("efe2"),o=s("99ad"),l="toString",r=RegExp.prototype,c=r[l],d=n((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=l;(d||u)&&i(RegExp.prototype,l,(function(){var t=a(this),e=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in r)?o.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},"20a5":function(t,e,s){"use strict";var i=s("1c8b"),a=s("3da3"),n=s("e1d9"),o=s("c7e6"),l=s("efe2"),r=1..toFixed,c=Math.floor,d=function(t,e,s){return 0===e?s:e%2===1?d(t,e-1,s*t):d(t*t,e/2,s)},u=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},m=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){r.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,s,i,l,r=n(this),m=a(t),f=[0,0,0,0,0,0],p="",v="0",g=function(t,e){var s=-1,i=e;while(++s<6)i+=t*f[s],f[s]=i%1e7,i=c(i/1e7)},h=function(t){var e=6,s=0;while(--e>=0)s+=f[e],f[e]=c(s/t),s=s%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var s=String(f[t]);e=""===e?s:e+o.call("0",7-s.length)+s}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(p="-",r=-r),r>1e-21)if(e=u(r*d(2,69,1))-69,s=e<0?r*d(2,-e,1):r/d(2,e,1),s*=4503599627370496,e=52-e,e>0){g(0,s),i=m;while(i>=7)g(1e7,0),i-=7;g(d(10,i,1),0),i=e-1;while(i>=23)h(1<<23),i-=23;h(1<<i),g(1,1),h(2),v=y()}else g(0,s),g(1<<-e,0),v=y()+o.call("0",m);return m>0?(l=v.length,v=p+(l<=m?"0."+o.call("0",m-l)+v:v.slice(0,l-m)+"."+v.slice(l-m))):v=p+v,v}})},"423c":function(t,e,s){"use strict";var i=s("9283"),a=s.n(i);a.a},"5fff":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"plcomment-content"},[t.show?[s("div",{ref:"header",staticClass:"comment-title"},[s("i",{staticClass:"iconfont icon-fanhui",on:{click:function(e){return t.goBack()}}}),s("span",{staticClass:"title"},[t._v("评论("+t._s(t.comments?t.comments.total:0)+")")])]),s("div",{ref:"songlist",staticClass:"songlist"},[s("div",{staticClass:"pic"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songList.coverImgUrl,expression:"songList.coverImgUrl"}],attrs:{alt:""}})]),s("div",{staticClass:"des"},[s("div",{staticClass:"title"},[t._v(t._s(t.songList.name))]),s("div",{staticClass:"creator"},[t._v(" by "),s("span",[t._v(t._s(t.songList.creator.nickname))])])])]),s("div",{ref:"nav",staticClass:"nav"},[s("span",{staticClass:"area active"},[t._v("评论区")]),s("span",[t._v("推荐")]),s("span",[t._v("最热")]),s("span",{staticClass:"active"},[t._v("最新")])]),s("div",{ref:"area",staticClass:"commentArea"},[s("div",{staticClass:"list",class:{pdbottom:t.paddingBottom}},[t._l(t.commentList,(function(e,i){return s("div",{key:i,staticClass:"list-item"},[s("div",{staticClass:"pic"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.user.avatarUrl,expression:"item.user.avatarUrl"}],attrs:{alt:""}})]),s("div",{staticClass:"comment"},[s("div",{staticClass:"name"},[t._v(t._s(e.user.nickname))]),s("div",{staticClass:"date"},[t._v(t._s(t._f("formatTime")(e.time)))]),s("div",{staticClass:"content noactive",on:{click:t.toggleContent}},[t._v(t._s(e.content))])]),s("div",{staticClass:"liked"},[s("div",{staticClass:"inner"},[s("span",[t._v(t._s(0===e.likedCount?"":e.likedCount))]),s("i",{staticClass:"icon-dianzan1 iconfont"})])])])})),t.end?s("pageEnd",{attrs:{content:t.commentTip}}):t._e()],2)])]:t._e()],2)},a=[],n=(s("b4fb"),s("ecb4"),s("77ad"),s("e18c"),s("96db"),s("af86"),s("e292")),o=s("365c"),l={name:"PlayListComment",data:function(){return{show:!1,comments:null,commentList:[],songList:null,offset:0,limit:15,before:0,isLoading:!1,timer:null,end:!1,commentTip:"暂无更多评论",scrollT:0}},computed:{paddingBottom:function(){return this.$store.getters.showPlayer}},components:{pageEnd:function(){return s.e("chunk-3fdbc532").then(s.bind(null,"55c3"))}},filters:{formatTime:function(t){var e=new Date(t),s=e.getMonth()+1>=10?e.getMonth():"0"+(e.getMonth()+1),i=e.getDate()>=10?e.getDate():"0"+e.getDate();return"".concat(s,"月").concat(i,"日")}},created:function(){var t=this;Promise.all([this.getComments(this.$route.params.playlist_id,this.offset),this.getList(this.$route.params.playlist_id)]).then((function(e){var s;t.$loading.hide(),t.comments=e[0],(s=t.commentList).push.apply(s,Object(n["a"])(e[0].comments)),e[0].comments[e[0].comments.length-1]?t.before=e[0].comments[e[0].comments.length-1].time:t.commentTip="暂无评论",t.songList=e[1].playlist,t.show=!0,t.$nextTick((function(){t.scrollT=t.$refs.nav.offsetTop,t.headerHeight=t.$refs.header.offsetHeight,t.end=t.comments.total<=t.limit}))})).catch((function(e){console.log(e),t.show=!0}))},mounted:function(){window.addEventListener("scroll",this.handlerScroll,!1)},beforeDestroy:function(){window.removeEventListener("scroll",this.handlerScroll,!1)},methods:{handlerScroll:function(){var t=this,e=document.body.scrollTop||document.documentElement.scrollTop,s=this.$refs.nav,i=this.$refs.area;e>this.scrollT-this.headerHeight-2?(s.className="nav fix",i.className="commentArea top"):(s.className="nav",i.className="commentArea"),this.timer&&clearTimeout(this.timer),e+window.innerHeight>i.offsetHeight-60&&!this.isLoading&&(this.timer=setTimeout((function(){t.offset++,t.isLoading=!0,t.offset*t.limit<t.comments.total?(t.$loading.show(),o["a"].PlayListComment(t.$route.params.playlist_id,t.offset,t.before).then((function(e){var s,i;t.comments.total-t.offset*t.limit<t.limit?((s=t.commentList).push.apply(s,Object(n["a"])(e.comments.slice(0,t.comments.total-t.offset*t.limit))),t.end=!0):(i=t.commentList).push.apply(i,Object(n["a"])(e.comments));t.before=e.comments[e.comments.length-1].time,t.$loading.hide(),t.isLoading=!1}))):t.end=!0}),200))},toggleContent:function(t){var e=t.target;-1===e.className.indexOf("noactive")?e.className="content noactive":e.className="content"},getComments:function(t,e){return this.$loading.show(),o["a"].PlayListComment(t,e)},getList:function(t){return o["a"].PlayListDetail(t)},goBack:function(){this.$router.go(-1)}}},r=l,c=(s("aef9"),s("9ca4")),d=Object(c["a"])(r,i,a,!1,null,"0ab0abae",null);e["default"]=d.exports},"77ad":function(t,e,s){"use strict";var i=s("1c8b"),a=s("a719"),n=s("74e7"),o=s("e1d6"),l=s("d88d"),r=s("da10"),c=s("1bbd"),d=s("90fb"),u=s("1ea7"),m=s("ff9c"),f=u("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),v=d("species"),g=[].slice,h=Math.max;i({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var s,i,d,u=r(this),m=l(u.length),f=o(t,m),p=o(void 0===e?m:e,m);if(n(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?a(s)&&(s=s[v],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return g.call(u,f,p);for(i=new(void 0===s?Array:s)(h(p-f,0)),d=0;f<p;f++,d++)f in u&&c(i,d,u[f]);return i.length=d,i}})},9283:function(t,e,s){},9302:function(t,e,s){"use strict";var i=s("1c8b"),a=s("692f"),n=s("da10"),o=s("d7e1"),l=[].join,r=a!=Object,c=o("join",",");i({target:"Array",proto:!0,forced:r||!c},{join:function(t){return l.call(n(this),void 0===t?",":t)}})},"98e0":function(t,e,s){var i=s("1c8b"),a=s("e62b"),n=s("f471"),o=!n((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:a})},a61b:function(t,e,s){},aef9:function(t,e,s){"use strict";var i=s("a61b"),a=s.n(i);a.a},c7e6:function(t,e,s){"use strict";var i=s("3da3"),a=s("2732");t.exports="".repeat||function(t){var e=String(a(this)),s="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(s+=e);return s}},e1d9:function(t,e,s){var i=s("2118");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},e292:function(t,e,s){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}function a(t){if(Array.isArray(t))return i(t)}s.d(e,"a",(function(){return r}));s("f3dd"),s("0a51"),s("9b11"),s("98e0"),s("e18c"),s("96db"),s("af86");function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}s("77ad"),s("053b"),s("1c2e");function o(t,e){if(t){if("string"===typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){return a(t)||n(t)||o(t)||l()}},e62b:function(t,e,s){"use strict";var i=s("e349"),a=s("3553"),n=s("69c5"),o=s("98a9"),l=s("d88d"),r=s("1bbd"),c=s("b60f");t.exports=function(t){var e,s,d,u,m,f,p=a(t),v="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,y=void 0!==h,b=c(p),C=0;if(y&&(h=i(h,g>2?arguments[2]:void 0,2)),void 0==b||v==Array&&o(b))for(e=l(p.length),s=new v(e);e>C;C++)f=y?h(p[C],C):p[C],r(s,C,f);else for(u=b.call(p),m=u.next,s=new v;!(d=m.call(u)).done;C++)f=y?n(u,h,[d.value,C],!0):d.value,r(s,C,f);return s.length=C,s}},fddd:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"pl-cntent",staticClass:"playlist-content"},[t.playListDate.coverImgUrl?s("div",{ref:"content",staticClass:"content"},[s("div",{staticClass:"header-title"},[s("div",{ref:"headerTitle",staticClass:"title-bgi"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.backgroundCoverUrl||t.playListDate.coverImgUrl,expression:"playListDate.backgroundCoverUrl || playListDate.coverImgUrl"}],class:{black:!t.playListDate.backgroundCoverUrl},attrs:{alt:""}})]),s("i",{staticClass:"iconfont icon-fanhui",on:{click:t.goBack}}),s("span",{staticClass:"title-text"},[t._v(t._s(t.playListTitle))])]),s("div",{staticClass:"playlist-header"},[s("div",{staticClass:"header-bgi"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.backgroundCoverUrl||t.playListDate.coverImgUrl,expression:"(playListDate.backgroundCoverUrl || playListDate.coverImgUrl) "}],staticClass:"bgimage",class:{black:!t.playListDate.backgroundCoverUrl},attrs:{alt:""}})]),s("div",{staticClass:"header-descript",on:{click:t.toggleDes}},[s("div",{staticClass:"des-name"},[t._v(t._s(t.playListDate.name))]),s("div",{staticClass:"des-creator"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.creator.avatarUrl,expression:"playListDate.creator.avatarUrl"}],attrs:{alt:""}}),s("span",[t._v(t._s(t.playListDate.creator.nickname))])]),s("div",{staticClass:"des-descript",domProps:{innerHTML:t._s(t.playListDate.description&&t.playListDate.description.replace(/\n/g,"<br/>"))}})]),s("div",{staticClass:"header-icon"},[s("div",{staticClass:"box",on:{click:t.goComment}},[s("i",{staticClass:"comment iconfont icon-pinglun"}),s("span",{staticClass:"comment-count"},[t._v(t._s(t._f("formatNum")(t.playListDate.commentCount)))])]),s("div",{staticClass:"box",on:{click:function(e){return t.$Toast({message:"功能未开发!",time:500})}}},[s("i",{staticClass:"share iconfont icon-fenxiang"}),s("span",{staticClass:"share-count"},[t._v(t._s(t._f("formatNum")(t.playListDate.shareCount)))])]),s("div",{staticClass:"box",on:{click:function(e){return t.$Toast({message:"功能未开发!",time:500})}}},[s("i",{staticClass:"comment iconfont icon-xiazai1"}),s("span",{staticClass:"comment-count"},[t._v("下载")])]),s("div",{staticClass:"box",on:{click:function(e){return t.$Toast({message:"功能未开发!",time:500})}}},[s("i",{staticClass:"comment iconfont icon-show_duoxuan"}),s("span",{staticClass:"comment-count"},[t._v("多选")])])])]),s("div",{ref:"playlistSong",staticClass:"playlist-song"},[s("div",{ref:"listTitle",staticClass:"list-title border"},[s("div",{staticClass:"plt-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.backgroundCoverUrl||t.playListDate.coverImgUrl,expression:"playListDate.backgroundCoverUrl || playListDate.coverImgUrl"}],class:{black:!t.playListDate.backgroundCoverUrl},attrs:{alt:""}})]),s("div",{staticClass:"list-title-box"},[s("div",{staticClass:"play-all",on:{click:t.playAll}},[s("i",{staticClass:"iconfont icon-bofang"}),s("span",{staticClass:"text"},[t._v("播放全部")]),s("span",{staticClass:"count"},[t._v("(共"+t._s(t.playListDate.trackCount)+"首)")])]),s("div",{staticClass:"collect",on:{click:t.collectPl}},[t._v(t._s(t.cltext)+" ("+t._s(t._f("formatNum")(t.playListDate.subscribedCount))+")")])])]),s("div",{staticClass:"list-song"},[t._l(t.playListSong,(function(e,i){return s("div",{key:i,staticClass:"list-song-item",on:{click:function(s){return t.playSong(e)}}},[s("div",{staticClass:"item-num"},[t._v(t._s(i+1))]),s("div",{staticClass:"item-detail"},[s("div",{staticClass:"song-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"song-singer"},[t._v(" "+t._s(e.ar[0].name)+" "),e.ar.length>1?[t._v("/ "+t._s(e.ar[1].name))]:t._e(),t._v(" - "+t._s(e.al.name)+" ")],2)]),s("div",{staticClass:"song-more",on:{click:function(t){t.stopPropagation()}}},[s("i",{staticClass:"iconfont icon-ziyuan1"})])])})),t.playListSong.length?s("pageEnd"):t._e()],2)])]):t._e(),s("transition",{attrs:{name:"show-descript",mode:"out-in"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDes,expression:"showDes"}],staticClass:"playlist-descript",on:{touchstart:function(e){return e.stopPropagation(),t.tStart(e)},touchend:function(e){return e.stopPropagation(),t.tEnd(e)}}},[s("div",{staticClass:"des-bg"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.coverImgUrl,expression:"playListDate.coverImgUrl"}],attrs:{alt:""}})]),s("div",{staticClass:"des-main"},[s("div",{staticClass:"descript-header"},[s("i",{staticClass:"des-close iconfont icon-chacha",on:{click:t.toggleDes}}),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDate.coverImgUrl,expression:"playListDate.coverImgUrl"}],staticClass:"descript-img",attrs:{alt:""}}),s("div",{staticClass:"descript-title"},[t._v(t._s(t.playListDate.name))])]),s("div",{staticClass:"descript-content"},[s("div",{staticClass:"des-tag"},[s("span",{staticClass:"tag-title"},[t._v("标签:")]),t._l(t.playListDate.tags,(function(e,i){return s("span",{key:i,staticClass:"tags"},[t._v(t._s(e))])}))],2),s("div",{staticClass:"des-text",domProps:{innerHTML:t._s(t.playListDate.description&&t.playListDate.description.replace(/\n/g,"<br/>"))}})])])])]),s("toTop")],1)},a=[],n=(s("9302"),s("77ad"),s("053b"),s("20a5"),s("e18c"),s("365c")),o={data:function(){return{playListDate:{},listId:0,showDes:!1,playListTitle:"歌单",playListSong:[],cltext:"收藏",start:null,end:null}},computed:{playListId:function(){return this.$route.params.playlist_id},navig:function(){var t=window.navigator.appVersion,e=!1;return/mobile/i.test(t)&&/chrome/i.test(t)&&(e=!0),e}},filters:{formatNum:function(t){var e=parseInt(t);return e>1e8?(e/1e8).toFixed(2)+"亿":e>1e5?(e/1e4).toFixed(1)+"万":e}},mounted:function(){window.addEventListener("scroll",this.handerScroll,!0)},beforeDestroy:function(){window.removeEventListener("scroll",this.handerScroll)},components:{toTop:function(){return s.e("chunk-4287d1b5").then(s.bind(null,"c12c"))},pageEnd:function(){return s.e("chunk-3fdbc532").then(s.bind(null,"55c3"))}},activated:function(){this.listId=parseInt(this.playListId),(document.body.scrollTop||document.documentElement.scrollTop<=0)&&this.$refs.listTitle&&this.$refs.playlistSong&&(this.$refs.listTitle.className="list-title border",this.$refs.playlistSong.querySelector(".list-song").className="list-song",this.playListTitle="歌单",this.$refs.headerTitle.style.opacity="0")},methods:{goComment:function(){this.$router.push({name:"PlayListComment",params:{playlist_id:this.listId}})},playAll:function(){this.playListSong.length&&this.$store.dispatch("setPlayShow",this.playListSong)},collectPl:function(){var t=this;this.$loading.show();var e=1;n["a"].PlayListDetail(this.$route.params.playlist_id).then((function(s){console.log("收藏状态",t.playListDate.subscribed),s.playlist.subscribed&&(e=2),n["a"].collectPlayList(e,t.playListDate.id).then((function(s){200===s.code&&(t.$loading.hide(),t.cltext=2===e?"收藏":"已收藏")}))}))},handerScroll:function(){var t=document.body.scrollTop||document.documentElement.scrollTop,e=this.$refs.playlistSong,s=this.$refs.listTitle,i=this.$refs.playlistSong.querySelector(".list-song"),a=this.$refs.headerTitle;t>=e.offsetTop-a.offsetHeight?(s.className="list-title sticky",i.className="list-song list-song-top",this.playListTitle=this.playListDate.name):(s.className="list-title border",i.className="list-song",this.playListTitle="歌单"),t>=0&&t<=e.offsetTop?a.style.opacity=(t/(e.offsetTop-a.offsetHeight)).toFixed(2):a.style.opacity=1},scrollToCallback:function(t,e){window.scrollTo({top:t,behavior:"smooth"}),window.onscroll=function(s){var i=document.body.scrollTop||document.documentElement.scrollTop;i>=t-60&&e&&e()}},tStart:function(t){this.$refs["pl-cntent"].style.position="fixed",t.stopPropagation()},tEnd:function(t){this.$refs["pl-cntent"].style.position="",t.stopPropagation()},toggleDes:function(){this.showDes=!this.showDes},goBack:function(){this.$router.go(-1)},getIds:function(t){var e=[];if(Array.isArray(t)){for(var s=0,i=t.length;s<i;s++)e.push(t[s].id);return e.join(",")}},getPlayList:function(){var t=this;this.playListDate=[],this.playListSong=[],this.$loading.show(),n["a"].PlayListDetail(this.$route.params.playlist_id).then((function(e){e.code===n["a"].STATUS&&(t.playListDate=e.playlist,t.cltext=e.playlist.subscribed?"已收藏":"收藏",n["a"].MusicDetail(t.getIds(e.playlist.trackIds)).then((function(e){t.playListSong=e.songs.slice(0,100),t.$loading.hide()})))})).catch((function(e){console.log("err",e),t.$loading.hide(),alert("网络错误!")}))},playSong:function(t){this.$store.dispatch("setPlayShow",t)}},watch:{listId:function(t,e){this.getPlayList()}}},l=o,r=(s("423c"),s("9ca4")),c=Object(r["a"])(l,i,a,!1,null,"7df7824c",null);e["default"]=c.exports}}]);
//# sourceMappingURL=PlayList.b4977298.js.map