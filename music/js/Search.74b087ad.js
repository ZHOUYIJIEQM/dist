(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"053b":function(t,e,s){var i=s("1e2c"),n=s("d910").f,r=Function.prototype,a=r.toString,o=/^\s*function ([^ (]*)/,c="name";i&&!(c in r)&&n(r,c,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(t){return""}}})},"1c2e":function(t,e,s){"use strict";var i=s("1944"),n=s("857c"),r=s("efe2"),a=s("99ad"),o="toString",c=RegExp.prototype,l=c[o],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=o;(u||f)&&i(RegExp.prototype,o,(function(){var t=n(this),e=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?a.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},"2d3b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"searchPage",staticClass:"search-page"},[s("div",{staticClass:"search-box-wrapper"},[s("div",{staticClass:"rback"},[s("i",{staticClass:"iconfont icon-fanhui",on:{click:function(e){return t.goBack()}}})]),s("div",{staticClass:"search-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"input-box",attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.query,expression:"query"}],staticClass:"iconfont icon-chacha",on:{click:t.cleanQuery}})]),t._m(0)]),t.query?t._e():s("div",{staticClass:"search-hots"},[s("div",{staticClass:"search-hots-title"},[t._v(" 热搜榜 ")]),s("div",{staticClass:"search-hots-list"},t._l(t.hotsList,(function(e,i){return s("div",{key:i,staticClass:"hots-item",on:{click:function(s){return t.clickHotList(e)}}},[s("div",{staticClass:"hots-item-numb",class:{three:i<3}},[t._v(t._s(i+1))]),s("div",{staticClass:"hots-item-detail"},[s("div",{staticClass:"item-searchWord"},[s("div",{staticClass:"item-name",class:{bold:i<3}},[t._v(t._s(e.searchWord))]),e.iconUrl?s("div",{staticClass:"hots-item-pic",class:{up:5==e.iconType}},[s("img",{attrs:{src:e.iconUrl}})]):t._e(),s("div",{staticClass:"hots-item-score"},[t._v(t._s(e.score))])]),s("div",{staticClass:"item-content"},[t._v(t._s(e.content))])])])})),0)]),t.searchResult.length?s("div",{staticClass:"search-result"},[s("div",{staticClass:"header"},[t._v("单曲")]),s("div",{staticClass:"search-result-list"},t._l(t.searchResult,(function(e,i){return s("div",{key:i,staticClass:"search-result-item",on:{click:function(s){return t.playSong(e)}}},[s("div",{staticClass:"song-num"},[t._v(t._s(i+1))]),s("div",{staticClass:"song-item"},[s("div",{staticClass:"song-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"singer-name"},[t._v(t._s(e.artists&&e.artists[0].name)+" - "+t._s(e.album&&e.album.name))])])])})),0)]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hotsList.length||t.searchResult.length,expression:"hotsList.length || searchResult.length"}],staticClass:"page-end"},[s("pageEnd")],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-icon"},[s("i",{staticClass:"icon-sousuo iconfont"})])}],r=(s("e18c"),s("6db4"),s("e292")),a=s("365c"),o={data:function(){return{query:"",placeholder:"搜索歌曲、歌手",hotsList:[],resultOffset:0,isLoading:!1,searchResult:[]}},components:{pageEnd:function(){return s.e("chunk-3fdbc532").then(s.bind(null,"55c3"))}},created:function(){var t=this;this.$loading.show(),a["a"].HotSearch().then((function(e){e.code===a["a"].STATUS&&(t.hotsList=e.data,t.$loading.hide())}))},mounted:function(){this.$refs.searchPage.addEventListener("scroll",this.scrllBottom,!1)},beforeDestroy:function(){this.$refs.searchPage.removeEventListener("scroll",this.scrllBottom,!1)},methods:{goBack:function(){this.$router.go(-1)},cleanQuery:function(){this.query="",this.searchResult=[],this.resultOffset=0,this.$refs.searchPage.scrollTop=0},clickHotList:function(t){this.query=t.searchWord},scrllBottom:function(){var t=this,e=this.$refs.searchPage,s=e.scrollTop,i=e.scrollHeight,n=window.innerHeight;n+s+100>i&&!this.isLoading&&this.query&&(this.resultOffset++,this.isLoading=!0,this.$loading.show(),a["a"].SearchSong({keywords:this.query,offset:this.resultOffset,limit:30}).then((function(e){var s;t.isLoading=!1,(s=t.searchResult).push.apply(s,Object(r["a"])(e.result.songs)),t.$loading.hide()})).catch((function(e){console.log("err",e),t.$loading.hide()})))},playSong:function(t){var e=this;this.$loading.show(),a["a"].MusicDetail(""+t.id).then((function(t){e.$store.dispatch("setPlayShow",t.songs[0])}))},getSong:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isLoading=!0,this.searchResult=[],this.$loading.show(),a["a"].SearchSong({keywords:t,offset:s,limit:30}).then((function(t){e.searchResult=t.result.songs,e.isLoading=!1,e.$loading.hide()})).catch((function(t){console.log("err",t),e.$loading.hide()}))}},watch:{query:function(t,e){t.trim()&&(this.getSong(t),this.resultOffset=0)}}},c=o,l=(s("7b00"),s("9ca4")),u=Object(l["a"])(c,i,n,!1,null,"295b5c84",null);e["default"]=u.exports},"3da2":function(t,e,s){},"6db4":function(t,e,s){"use strict";var i=s("1c8b"),n=s("c10f").trim,r=s("f221");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return n(this)}})},"77ad":function(t,e,s){"use strict";var i=s("1c8b"),n=s("a719"),r=s("74e7"),a=s("e1d6"),o=s("d88d"),c=s("da10"),l=s("1bbd"),u=s("90fb"),f=s("1ea7"),h=s("ff9c"),d=f("slice"),v=h("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),p=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!d||!v},{slice:function(t,e){var s,i,u,f=c(this),h=o(f.length),d=a(t,h),v=a(void 0===e?h:e,h);if(r(f)&&(s=f.constructor,"function"!=typeof s||s!==Array&&!r(s.prototype)?n(s)&&(s=s[g],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(f,d,v);for(i=new(void 0===s?Array:s)(m(v-d,0)),u=0;d<v;d++,u++)d in f&&l(i,u,f[d]);return i.length=u,i}})},"7b00":function(t,e,s){"use strict";var i=s("3da2"),n=s.n(i);n.a},"98e0":function(t,e,s){var i=s("1c8b"),n=s("e62b"),r=s("f471"),a=!r((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:n})},c10f:function(t,e,s){var i=s("2732"),n=s("fc8c"),r="["+n+"]",a=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),c=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(a,"")),2&t&&(s=s.replace(o,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},e292:function(t,e,s){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}function n(t){if(Array.isArray(t))return i(t)}s.d(e,"a",(function(){return c}));s("f3dd"),s("0a51"),s("9b11"),s("98e0"),s("e18c"),s("96db"),s("af86");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}s("77ad"),s("053b"),s("1c2e");function a(t,e){if(t){if("string"===typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||r(t)||a(t)||o()}},e62b:function(t,e,s){"use strict";var i=s("e349"),n=s("3553"),r=s("69c5"),a=s("98a9"),o=s("d88d"),c=s("1bbd"),l=s("b60f");t.exports=function(t){var e,s,u,f,h,d,v=n(t),g="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,y=void 0!==m,b=l(v),C=0;if(y&&(m=i(m,p>2?arguments[2]:void 0,2)),void 0==b||g==Array&&a(b))for(e=o(v.length),s=new g(e);e>C;C++)d=y?m(v[C],C):v[C],c(s,C,d);else for(f=b.call(v),h=f.next,s=new g;!(u=h.call(f)).done;C++)d=y?r(f,m,[u.value,C],!0):u.value,c(s,C,d);return s.length=C,s}},f221:function(t,e,s){var i=s("efe2"),n=s("fc8c"),r="​᠎";t.exports=function(t){return i((function(){return!!n[t]()||r[t]()!=r||n[t].name!==t}))}},fc8c:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=Search.74b087ad.js.map