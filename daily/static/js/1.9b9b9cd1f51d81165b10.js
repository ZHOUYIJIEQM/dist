webpackJsonp([1],{"/7kz":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("gyMJ"),r=e("HPt7"),i={components:{bottomBar:function(){return e.e(7).then(e.bind(null,"jxza"))},shareModule:function(){return e.e(12).then(e.bind(null,"WKA8"))}},data:function(){return{story:{},storyBody:"",isFirstEnter:!1,shareModuleIsShow:!1,imgPath:r.a.imgPath,storyExtra:{}}},computed:{refreshing:function(){return this.$store.state.refreshing}},created:function(){this.isFirstEnter=!0},activated:function(){this.$route.meta.isBack&&!this.isFirstEnter||(this.getPost(this.$route.params.id),this.isFirstEnter=!1)},beforeRouteLeave:function(t,s,e){"comment"===t.name&&this.$store.commit("setRefreshing",!0),e()},methods:{getPost:function(t){var s=this;o.a.getPost(t).then(function(e){s.story=e,s.storyBody=s.handlerimg(e.body),s.getExtra(t)})},getExtra:function(t){var s=this;o.a.getStoryExtraById(t).then(function(t){s.storyExtra=t,setTimeout(function(){s.$store.commit("setRefreshing",!1)},250)})},handlerimg:function(t){var s=new RegExp('src="http(s{0,1})://pic',"g");return t.replace(s,'src="'+r.a.imgPath+"http://pic")},toShare:function(){this.shareModuleIsShow=!this.shareModuleIsShow},toComment:function(){this.$router.push({name:"comment",params:{id:this.story.id}})}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:!t.refreshing&&t.story,expression:"!refreshing && story"}],staticClass:"news-detail"},[e("link",{attrs:{rel:"stylesheet",href:t.story.css}}),t._v(" "),e("div",{staticClass:"container"},[t.story.image?e("div",{staticClass:"top"},[e("img",{staticClass:"img",attrs:{src:t.imgPath+t.story.image}}),t._v(" "),e("div",{staticClass:"mask"}),t._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v(t._s(t.story.title))]),t._v(" "),e("div",{staticClass:"image_source"},[t._v(t._s(t.story.image_source))])])]):t._e(),t._v(" "),t.story.body?e("div",[e("div",{staticClass:"my-body",domProps:{innerHTML:t._s(t.storyBody)}})]):t.story?t._e():e("div",{staticClass:"no-content"},[t._v("没有内容")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.shareModuleIsShow,expression:"shareModuleIsShow"}],staticClass:"share-mask",on:{click:t.toShare}}),t._v(" "),e("transition",{attrs:{name:"fadeIn"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.shareModuleIsShow,expression:"shareModuleIsShow"}],staticClass:"share-position"},[e("shareModule",{on:{toggleShare:t.toShare}})],1)]),t._v(" "),e("div",{staticClass:"bottombar"},[e("bottomBar",{attrs:{commentInfo:t.storyExtra},on:{toComment:t.toComment,toShare:t.toShare}})],1)],1)},staticRenderFns:[]};var n=e("C7Lr")(i,a,!1,function(t){e("h3gi"),e("kc01")},"data-v-28620ae5",null);s.default=n.exports},h3gi:function(t,s){},kc01:function(t,s){}});
//# sourceMappingURL=1.9b9b9cd1f51d81165b10.js.map